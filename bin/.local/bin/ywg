#!/bin/sh

while true; do
    LATEST=$(doas wg show | grep -E "lab|wireguard" | cut -d ' ' -f 2 | tail -n1)
    if [ -n "$LATEST" ]; then
        printf "wg|string|%s\n\n" "$LATEST"
    else
        printf "wg|string|n/a\n\n"
    fi
    sleep 5
done
