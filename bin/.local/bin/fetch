#!/bin/sh

NC='\e[0m'      # No Color
BLA='\e[30m'
RED='\e[31m'
GRE='\e[32m'
YEL='\e[33m'
BLU='\e[1;34m'
MAG='\e[1;35m'
CYA='\e[36m'
WHI='\e[1;37m'

WIDTH=30

HOSTNAME=$(cat /proc/sys/kernel/hostname)
OS=$(uname -o)
DISTRO=$(grep -h PRETTY_NAME /etc/*-release | cut -d '"' -f 2)
KERNEL=$(uname -r)
which pacman > /dev/null 2>&1 \
        && PKGS=$(pacman -Q | wc -l) \
        || PKGS=$(xbps-query -l | wc -l)
MEM=$(free -m | grep Mem: | tr -s " " | cut -d' ' -f3)" mb"
CPU=$(top -bn1 | grep %Cpu | tr -s " " | cut -d' ' -f2)"%"
UPTIME=$(uptime -p)

display_top() {
    printf "|${GRE}\u250F"
    printf "\u2501%0.s" {1..30}
    printf "\u2513${NC}\n"
}

display_bot() {
    printf "|${GRE}\u2517"
    printf "\u2501%0.s" {1..30}
    printf "\u251B${NC}\n\n"
}

SIDE="${GRE}\u2503${NC}"

COLOR0="${BLA}\u2588\u2588${NC}"
COLOR1="${RED}\u2588\u2588${NC}"
COLOR2="${GRE}\u2588\u2588${NC}"
COLOR3="${YEL}\u2588\u2588${NC}"
COLOR4="${BLU}\u2588\u2588${NC}"
COLOR5="${MAG}\u2588\u2588${NC}"
COLOR6="${CYA}\u2588\u2588${NC}"
COLOR7="${WHI}\u2588\u2588${NC}"

print_info() {
    display_top
    printf "$SIDE $COLOR0 $YEL%s$NC|%s $SIDE\n" "os" "$OS"
    printf "$SIDE $COLOR1 $YEL%s$NC|%s $SIDE\n" "distro" "$DISTRO"
    printf "$SIDE $COLOR2 $YEL%s$NC|%s $SIDE\n" "kernel" "$KERNEL"
    printf "$SIDE $COLOR3 $YEL%s$NC|%s $SIDE\n" "pkgs" "$PKGS"
    printf "$SIDE $COLOR5 $YEL%s$NC|%s $SIDE\n" "mem" "$MEM"
    printf "$SIDE $COLOR6 $YEL%s$NC|%s $SIDE\n" "cpu" "$CPU"
    printf "$SIDE $COLOR7 $YEL%s$NC|%s $SIDE\n" "uptime" "$UPTIME"
    display_bot
}

printf "\n ${BLU}${USER}${WHI}@${MAG}${HOSTNAME}${NC}\n"
print_info | column --table --output-width $WIDTH --table-columns "left,value,right" --table-right "value" --table-noheadings --separator "|"
